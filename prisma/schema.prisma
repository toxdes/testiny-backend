generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

///
model UserProfile {
  id     Int     @id @default(autoincrement())
  name   String? @db.VarChar(255)
  bio    String?
  avatar String?
  userId Int     @unique
  user   User    @relation(fields: [userId], references: [id])

  @@map("user_profiles")
}

model User {
  id             Int          @id @default(autoincrement())
  email          String       @unique @db.VarChar(255)
  username       String       @unique @db.VarChar(255)
  uuid           String       @unique
  email_verified Boolean      @default(false)
  password       String       @db.VarChar(255)
  profile        UserProfile?

  Question Question[]
  @@map("users")
}

model Following {
  id       Int @id @default(autoincrement())
  userId_a Int
  userId_b Int

  @@unique([userId_a, userId_b], name: "follower_following_unique")
  @@map("following")
}

enum QuestionType {
  MCQ
  MSQ
  NAT
}

model Question {
  id            Int            @id @default(autoincrement())
  questionId    String         @unique @db.VarChar(255)
  question_type QuestionType
  text          String
  visibility    String
  choices       String[]
  difficulty    Int
  QuestionTags  QuestionTags[]
  author        User           @relation(fields: [userId], references: [id])
  userId        Int
}

model QuestionTags {
  id         Int       @id @default(autoincrement())
  question   Question? @relation(fields: [questionId], references: [id])
  questionId Int?
}
